<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@800&display=swap');
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    :root {
      --primary-gradient: linear-gradient(135deg, #7B8FF7 0%, #5B6FD8 100%);
      --white: #ffffff;
      --text-dark: #1a1a2e;
      --text-gray: #6B7280;
      --light-bg: #F0F2FF;
      --bg-light: #f5f5f7;
      --card-bg: rgba(255, 255, 255, 0.9);
      --shadow: rgba(91, 111, 216, 0.15);
      --primary-color: #5b6fd8;
      --primary: #3b82f6;
      --primary-dark: #2563eb;
      --radius-sm: 12px;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      scroll-behavior: smooth;
    }
    .nav-logo img {
    width: 120px;
    height: auto;
    display: block;
    }
    .btn-signup a, .btn-login a {
      text-decoration: none;
      color: inherit;
    }
    .btn-login:hover {
      color: white;
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 24px;
      color: var(--primary-purple);
      cursor: pointer;
    }
    .nav-menu {
      display: flex;
      align-items: center;
      gap: 20px;
    }
    .nav-menu > a {
      color: var(--text-dark);
      text-decoration: none;
      font-size: 15px;
      font-weight: 500;
      transition: color 0.3s ease;
      padding: 12px 16px;
    }
    .nav-menu > a:hover {
      color: var(--primary-purple);
    }
    .search-bar {
      display: flex;
      align-items: center;
      background: var(--bg-light);
      padding: 10px 16px;
      border-radius: 24px;
      min-width: 240px;
      gap: 10px;
    }
    .search-bar i {
      color: var(--text-gray);
      font-size: 14px;
    }
    .search-bar input {
      border: none;
      background: transparent;
      outline: none;
      width: 100%;
      font-size: 14px;
      color: var(--text-dark);
    }
    .search-bar input::placeholder {
      color: var(--text-gray);
    }
    .dropdown-nav {
      position: relative;
      display: inline-block;
    }
    .dropdown-link {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      color: var(--text-dark);
      text-decoration: none;
      font-weight: 500;
      font-size: 15px;
      transition: all 0.3s ease;
      border-radius: 8px;
      cursor: pointer;
    }
    .dropdown-link:hover {
      background: rgba(91, 78, 195, 0.1);
      color: #7c6fd8;
    }
    .arrow-icon {
      font-size: 12px;
      transition: transform 0.3s ease;
    }
    .dropdown-link.active .arrow-icon {
      transform: rotate(180deg);
    }
    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(-10px);
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      margin-top: 10px;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1000;
      min-width: 280px;
    }
    .dropdown-menu.active {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }
    .dropdown-menu-header {
      padding: 16px 24px 12px;
      border-bottom: 2px solid #e2e8f0;
      color: var(--text-gray);
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .dropdown-menu-content {
      padding: 8px 0;
    }
    .dropdown-menu-item {
      padding: 12px 24px;
      transition: background 0.3s ease;
    }
    .dropdown-menu-item:hover {
      background: rgba(91, 78, 195, 0.1);
    }
    .dropdown-menu-item a {
      color: var(--text-dark);
      text-decoration: none;
      font-size: 15px;
      display: block;
      transition: color 0.3s ease;
      font-weight: 500;
    }
    .dropdown-menu-item a:hover {
      color: #7c6fd8;
    }
    .dropdown-menu-footer {
      padding: 12px 24px;
      border-top: 1px solid #e2e8f0;
    }
    .view-all-btn {
      display: block;
      width: 100%;
      padding: 10px 16px;
      /* background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); */
      color: white;
      text-align: center;
      text-decoration: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      /* box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3); */
      border: none;
      transform: translateY(-2px);
      box-shadow: 0 14px 40px rgba(59, 130, 246, 0.4);
    }

    /* Old Styling of the view-all button in case Duren wants it back */

    /* .view-all-btn:hover {
      background: linear-gradient(135deg, #5568d3 0%, #65408b 100%);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    } */

    .btn-login {
      padding: 10px 24px;
      background: transparent;
      border: 2px solid var(--primary-color);
      border-radius: 8px;
      color: var(--primary-color);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .btn-login:hover {
      background: var(--primary-color);
      color: var(--white);
    }
    .btn-signup {
      padding: 10px 24px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: 2px solid var(--primary-color);
      border-radius: 8px;
      color: var(--white);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .btn-signup:hover {
      background: var(--primary-dark);
      border-color: var(--primary-dark);
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: block;
      }
      .nav-menu {
        position: fixed;
        top: 70px;
        left: 0;
        right: 0;
        background: var(--white);
        flex-direction: column;
        align-items: center;
        padding: 16px 20px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        transform: translateY(-100%);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        gap: 10px;
        max-height: calc(100vh - 70px);
        overflow-y: auto;
      }
      .nav-menu.active {
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
      }

      .btn-login,
      .btn-signup {
        display: none;
      }
    }
    .btn-primary {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
        border: none;
      }
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 14px 40px rgba(59, 130, 246, 0.4);
      }
      .btn-outline {
        background: rgba(255, 255, 255, 0.7);
        color: var(--primary);
        border: 1px solid rgba(59, 130, 246, 0.3);
        backdrop-filter: blur(10px);
      }
      .btn-outline:hover {
        background: rgba(255, 255, 255, 0.9);
        border-color: var(--primary);
        transform: translateY(-2px);
      }
        .btn {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 14px 28px;
        border-radius: var(--radius-sm);
        font-weight: 600;
        font-size: 15px;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;

      }
      .btn::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
      }
      .btn:hover::before {
        width: 300px;
        height: 300px;
      }
         button a{
          color: white;
        text-decoration: none;
      }
    .search-unified {
      flex:1;
      margin: 0 8px;
      display:flex;
      align-items:center;
      gap: 12px;
      height:56px;
      background: var(--white);
      border-radius:12px;
      box-shadow: 0 6px 18px rgba(9,30,66,0.08);
      padding: 6px 10px;
      position: relative;
      align-self: stretch;
      overflow: visible;
      border: 1px solid rgba(15,23,42,0.04);
    }
    .search-left {
      min-width:120px;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      color:var(--text-dark);
      user-select:none;
    }
    .search-left .caret { font-size:12px; color:var(--text-gray); margin-left:6px; }
    .divider-vertical {
      width:1px; height:36px; background:rgba(15,23,42,0.06); border-radius:2px;
    }
    .search-center {
      flex:1;
      display:flex;
      align-items:center;
      gap:12px;
      padding-left:6px;
      min-width:220px;
      overflow: hidden;
    }
    .chips {
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    .chip {
      display:inline-flex;
      align-items:center;
      gap:8px;
      background: var(--pill-bg);
      color:var(--btn-blue);
      padding:6px 10px;
      border-radius:20px;
      font-weight:600;
      font-size:13px;
      box-shadow: 0 1px 0 rgba(11,132,255,0.06) inset;
    }
    .chip .x { cursor:pointer; margin-left:4px; color:#0665d4; font-weight:700; }
    .search-input {
      flex:1;
      min-width:90px;
    }
    .search-input input {
      width:100%;
      border:none;
      outline:none;
      font-size:15px;
      color:var(--text-gray);
      background:transparent;
      padding:8px 6px;
    }
    .search-input input::placeholder{ color: #9aa6bf; }
    .search-right { display:flex; align-items:center; gap:16px; margin-left:auto; }
    .filters { display:flex; align-items:center; gap:8px; color:var(--primary-purple); font-weight:600; cursor:pointer; padding:8px 10px; border-radius:8px; }
    .filters i { color:var(--primary-purple); }
    .search-btn {
      background: linear-gradient(90deg,var(--btn-blue),var(--btn-blue-dark));
      color:#fff;
      padding:12px 20px;
      border-radius:10px;
      font-weight:700;
      border:none;
      cursor:pointer;
      font-size:15px;
    }
    .search-dropdown {
      position:absolute;
      left:18px;
      right:18px;
      top:66px;
      margin:auto;
      max-width:920px;
      background:#fff;
      border-radius:12px;
      box-shadow: 0 18px 60px rgba(11,30,66,0.18);
      border: 1px solid rgba(11,30,66,0.04);
      z-index:1300;
      display:none;
      overflow: hidden;
    }
    .search-dropdown.active { display:block; }
    .dd-inner { display:flex; gap:8px; min-height:260px; max-height:420px; overflow:auto; padding:12px; align-items:flex-start; }
    .dd-left {
      width:50%;
      min-width:320px;
      background:#fff;
      border-radius:8px;
      padding:8px;
      overflow:auto;
    }
    .dd-right {
      width:50%;
      min-width:240px;
      padding:8px;
      background: #fff;
      border-radius:8px;
      overflow:auto;
      border-left: 1px solid rgba(11,30,66,0.04);
    }
    .dd-row {
      display:flex;
      align-items:center;
      gap:12px;
      padding:10px 12px;
      border-radius:8px;
      transition: background .12s;
    }
    .dd-row:hover { background: #f6f9ff; }
    .dd-row input[type="checkbox"] { width:18px; height:18px; }
    .dd-label { font-size:15px; font-weight:600; color:var(--text-dark); flex:1; }
    .count-badge {
      background:#eaf2ff;
      color:var(--btn-blue);
      font-weight:700;
      padding:4px 8px;
      border-radius:14px;
      font-size:13px;
      margin-left:6px;
    }
    .models-btn {
      background: rgba(11,132,255,0.08);
      color: var(--btn-blue);
      padding:6px 12px;
      border-radius:18px;
      font-weight:700;
      cursor:pointer;
      border:none;
      font-size:13px;
    }
    .dd-row.any { padding-left:8px; font-weight:600; }
    .levels-panel {
      position:absolute;
      top:64px;
      left:18px;
      width:160px;
      background:#fff;
      border-radius:10px;
      box-shadow: 0 10px 30px rgba(11,30,66,0.12);
      padding:8px;
      display:none;
      z-index:1400;
    }
    .levels-panel.active { display:block; }
    .level-row { padding:8px 10px; border-radius:8px; display:flex; align-items:center; justify-content:space-between; cursor:pointer; }
    .level-row.locked { color:var(--text-gray); opacity:0.5; pointer-events:none; }
    .level-row:hover { background:#f6f9ff; }
    @media (max-width: 980px){
      .dd-left { width:60%; }
      .dd-right { width:40%; }
    }
    @media (max-width: 760px){
      .nav-container{ padding: 0 12px; }
      .search-unified{ flex-direction:column; align-items:stretch; gap:8px; height:auto; padding:10px; }
      .search-left{ min-width:unset; width:100%; justify-content:space-between; padding:10px; }
      .search-center{ width:100%; }
      .search-right{ width:100%; justify-content:space-between; }
      .search-dropdown{ left:12px; right:12px; top:120px; }
      .levels-panel{ left:12px; top:140px; }
    }

  @media (max-width: 600px) {
    .search-unified {
      flex-direction: column;
      align-items: stretch;
      gap: 8px;
    }
    .levels-toggle {
      width: 100%;
      justify-content: center;
    }
    .chips-container {
      width: 100%;
      flex-wrap: wrap;
      justify-content: center;
    }
    .search-center {
      width: 100%;
      order: 3;
    }
    .search-right {
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 12px;
    }
    #mainSearchInput {
      width: 100%;
      font-size: 14px;
      padding: 10px;
    }
    .search-dropdown {
      width: 100%;
      left: 0 !important;
      transform: none !important;
    }
  }
.level-row {
  white-space: nowrap;
}

/* Make Nvaigation Sticky */

.navbar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 2000 ;
    background: var(--white);
    padding: 16px 0;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <a href="index.html"><img src="https://builder.nex-era.app/api/public/dl/LIA7JUjZ/Nexera_logo_tiny.png?inline=true" alt="Nexera Logo"></a>
      </div>

      <button class="mobile-menu-btn" id="mobileMenuBtn">
        <i class="fas fa-bars"></i>
      </button>

      <div class="nav-menu" id="navMenu">
        <div class="dropdown-nav">
          <a href="#" class="dropdown-link" id="exploreLink" style="margin-left: 5px;">
            Explore
            <span class="arrow-icon"><i class="fas fa-chevron-down"></i></span>
          </a>

          <div class="dropdown-menu" id="exploreMenu">
            <div class="dropdown-menu-header">Explore Industries</div>
            <div class="dropdown-menu-content">
              <div class="dropdown-menu-item"><a href="industries.html?industry=agriculture">Agriculture</a></div>
              <div class="dropdown-menu-item"><a href="industries.html?industry=civil-construction">Civil & Construction</a></div>
              <div class="dropdown-menu-item"><a href="industries.html?industry=drone-tech">Drone Technology</a></div>
              <div class="dropdown-menu-item"><a href="industries.html?industry=education-development">Education & Development</a></div>
              <div class="dropdown-menu-item"><a href="industries.html?industry=transport-logistics">Transport & Logistics</a></div>
            </div>
            <div class="dropdown-menu-footer">
              <a href="view-all.html" class="view-all-btn">View All</a>
            </div>
          </div>
        </div>

        <div class="search-unified" id="searchUnified">

          <div class="search-left" id="levelsToggle" title="Choose level" style="font-size: 13px;">
            <span id="selectedLevelLabel">Levels</span>
            <i class="fas fa-chevron-down caret"></i>
          </div>

          <div class="divider-vertical"></div>

          <div class="search-center">
            <div class="chips" id="chipsContainer">
            </div>

            <div class="search-input">
              <input id="mainSearchInput" placeholder="Search your industry..." />
            </div>
          </div>

          <div class="search-right">
            <div class="filters" id="filtersBtn" style="display: none;"><i class="fas fa-sliders-h"></i> Filters</div>
          </div>

          <div class="levels-panel" id="levelsPanel" aria-hidden="true">
            <div class="level-row locked"><span>Primary School</span> <i class="fas fa-lock" style="color:var(--text-gray)"></i></div>
            <div class="level-row" data-level="High School" style="white-space: nowrap;">High School</div>
            <div class="level-row" data-level="Higher Education">Higher Education</div>
            <div class="level-row" data-level="Vocational Training">Vocational Training</div>
          </div>

          <div class="search-dropdown" id="searchDropdown" aria-hidden="true">
            <div class="dd-inner">
              <div class="dd-left" id="ddLeft">
                <div class="dd-row any" data-id="any">
                  <input type="checkbox" class="row-checkbox" data-id="any" />
                  <div class="dd-label">Any</div>
                </div>

                <div class="dd-row" data-id="agriculture">
                  <input type="checkbox" class="row-checkbox" data-id="agriculture" />
                  <div class="dd-label">Agriculture</div>
                </div>

                <div class="dd-row" data-id="civil-construction">
                  <input type="checkbox" class="row-checkbox" data-id="civil-construction" />
                  <div class="dd-label">Civil & Construction</div>
                </div>

                <div class="dd-row" data-id="drone-tech" style="opacity:0.95;">
                  <input type="checkbox" class="row-checkbox" data-id="drone-tech" />
                  <div class="dd-label">Drone Technology</div>
                </div>

                <div class="dd-row" data-id="education-development" style="opacity:0.95;">
                  <input type="checkbox" class="row-checkbox" data-id="education-development" />
                  <div class="dd-label">Education & Development</div>
                </div>

              </div>
            </div>
          </div>
        </div>

        <a href="pricing.html">Pricing</a>

        <!-- Commented out just in case Duren wants it for later -->

        <!-- <a href="#" class="dropdown-link" id="teachLink" style="white-space: nowrap;">
        Schools & Businesses
         <span class="arrow-icon"><i class="fas fa-chevron-down"></i></span>
        </a> -->

        <a href="analyticspage.html" style="margin-right: 20px;">Analytics</a>

          <!-- <div class="dropdown-menu" id="teachMenu">
            <div class="dropdown-menu-content">
                <div class="dropdown-menu-item"><a href="#forlecturers">For Lecturers</a></div>
              <div class="dropdown-menu-item"><a href="#forcampus">For Campus</a></div>
              <div class="dropdown-menu-item"><a href="#forbusiness">For Business</a></div>
            </div>
          </div> -->

        <button class="btn btn-primary btn-login" id="loginBtn" style=" margin-left: -20px; text-align: center;"><a href="#">Login</a></button>
        <button class="btn btn-outline btn-signup" id="signupBtn"><a href="#" style="color: black;">SignUp</a></button>
      </div>
    </div>
  </nav>

  <script>
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const navMenu = document.getElementById('navMenu');
    if (mobileMenuBtn) {
      mobileMenuBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        navMenu.classList.toggle('active');
        const icon = mobileMenuBtn.querySelector('i');
        icon.classList.toggle('fa-bars');
        icon.classList.toggle('fa-times');
      });
    }

    document.addEventListener('click', (e) => {
      if (navMenu && !navMenu.contains(e.target) && e.target !== mobileMenuBtn) {
        navMenu.classList.remove('active');
        const icon = mobileMenuBtn?.querySelector('i');
        if (icon) {
          icon.classList.add('fa-bars');
          icon.classList.remove('fa-times');
        }
      }
    });

    const exploreLink = document.getElementById('exploreLink');
    const exploreMenu = document.getElementById('exploreMenu');
    const teachLink = document.getElementById('teachLink');
    const teachMenu = document.getElementById('teachMenu');

    exploreLink.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      if (teachMenu && teachMenu.classList.contains('active')) {
        teachMenu.classList.remove('active');
        teachLink.classList.remove('active');
      }
      exploreMenu.classList.toggle('active');
      exploreLink.classList.toggle('active');
    });

    teachLink.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      if (exploreMenu.classList.contains('active')) {
        exploreMenu.classList.remove('active');
        exploreLink.classList.remove('active');
      }
      teachMenu.classList.toggle('active');
      teachLink.classList.toggle('active');
    });

    document.addEventListener('click', function(e) {
      if (!exploreLink.contains(e.target) && !exploreMenu.contains(e.target)) {
        exploreMenu.classList.remove('active');
        exploreLink.classList.remove('active');
      }
      if (!teachLink.contains(e.target) && !teachMenu.contains(e.target)) {
        teachMenu.classList.remove('active');
        teachLink.classList.remove('active');
      }
    });
  </script>

  <script>
  async function loadHTML(targetId, filePath) {
    try {
      const res = await fetch(filePath);
      const text = await res.text();
      const target = document.getElementById(targetId);

      target.innerHTML = text;

      const scripts = target.querySelectorAll("script");
      scripts.forEach(oldScript => {
        const newScript = document.createElement("script");
        if (oldScript.src) {
          newScript.src = oldScript.src;
        } else {
          newScript.textContent = oldScript.textContent;
        }
        document.body.appendChild(newScript);
      });

    } catch (err) {
      console.error(`Error loading ${filePath}:`, err);
    }
  }

  // loadHTML("nav-placeholder", "navigation.html");
  // loadHTML("footer-placeholder", "footer.html");
</script>

  <script>
    const searchUnified = document.getElementById('searchUnified');
    const searchDropdown = document.getElementById('searchDropdown');
    const levelsToggle = document.getElementById('levelsToggle');
    const levelsPanel = document.getElementById('levelsPanel');
    const selectedLevelLabel = document.getElementById('selectedLevelLabel');
    const chipsContainer = document.getElementById('chipsContainer');
    const mainSearchInput = document.getElementById('mainSearchInput');
    const ddLeft = document.getElementById('ddLeft');
    const ddRight = document.getElementById('ddRight');
    const coursesList = document.getElementById('coursesList');

    function openUnifiedDropdown(){
      searchDropdown.classList.add('active');
      levelsPanel.classList.remove('active');
    }
    function closeUnifiedDropdown(){
      searchDropdown.classList.remove('active');
    }

    mainSearchInput.addEventListener('focus', openUnifiedDropdown);
    document.getElementById('chipsContainer').addEventListener('click', openUnifiedDropdown);

    document.getElementById('filtersBtn').addEventListener('click', function(e){
      e.stopPropagation();
      alert('Filters panel (placeholder)');
    });

    levelsToggle.addEventListener('click', function(e){
      e.stopPropagation();
      levelsPanel.classList.toggle('active');
      searchDropdown.classList.remove('active');
    });

    levelsPanel.querySelectorAll('.level-row[data-level]').forEach(row=>{
      row.addEventListener('click', function(){
        const chosen = this.dataset.level;
        selectedLevelLabel.textContent = chosen;
        levelsPanel.classList.remove('active');
      });
    });

    document.addEventListener('click', function(e){
      if(!searchUnified.contains(e.target)){
        closeUnifiedDropdown();
      }
      if(!levelsPanel.contains(e.target) && !levelsToggle.contains(e.target)){
        levelsPanel.classList.remove('active');
      }
    });

    ddLeft.querySelectorAll('.row-checkbox').forEach(cb=>{
      cb.addEventListener('change', function(e){
        e.stopPropagation();
        const id = this.dataset.id;
        if(this.checked){
          addChip(id, ddLeft.querySelector('.dd-row[data-id="'+id+'"] .dd-label').textContent);
        } else {
          removeChip(id);
        }
      });
    });

    function addChip(id, label){
      if(chipsContainer.querySelector('[data-chip="'+id+'"]')) return;
      const chip = document.createElement('div');
      chip.className = 'chip';
      chip.dataset.chip = id;
      chip.innerHTML = `<span class="chip-label">${label}</span><span class="x">&times;</span>`;
      chipsContainer.appendChild(chip);

      chip.querySelector('.x').addEventListener('click', function(e){
        e.stopPropagation();
        removeChip(id);
        const cb = ddLeft.querySelector('.row-checkbox[data-id="'+id+'"]');
        if(cb) cb.checked = false;
      });
    }

    function removeChip(id){
      const existing = chipsContainer.querySelector('[data-chip="'+id+'"]');
      if(existing) existing.remove();
    }

    ddLeft.querySelectorAll('.models-btn').forEach(btn=>{
      btn.addEventListener('click', function(e){
        e.stopPropagation();
        const target = this.dataset.target;
        const row = this.closest('.dd-row');
        const industryId = row?.dataset?.id;
        if(!industryId) return;
        const cb = row.querySelector('.row-checkbox');
        if(cb && !cb.checked){
          cb.checked = true;
          addChip(industryId, row.querySelector('.dd-label').textContent);
        }
        populateCourses(industryId);
      });
    });

    function populateCourses(industryId){
      const mapping = {
        'agriculture': ['Course 1','Course 2','Course 3'],
        'civil-construction': ['Course 1','Course 2','Course 3'],
        'drone-tech': ['Course 1','Course 2','Course 3'],
        'education-development': ['Course 1','Course 2','Course 3']
      };
      const items = mapping[industryId] || ['Course 1','Course 2','Course 3'];
      coursesList.innerHTML = '';
      items.forEach(c=>{
        const div = document.createElement('div');
        div.className = 'course-item';
        div.textContent = c;
        div.addEventListener('click', function(e){
          e.stopPropagation();
          const chipId = industryId + '::' + c;
          addChip(chipId, c);
        });
        coursesList.appendChild(div);
      });

      searchDropdown.classList.add('active');
    }

    mainSearchInput.addEventListener('keydown', function(e){
      if(e.key === 'Enter'){
        const val = this.value.trim();
        if(!val) return;
        const id = 'custom::' + val.toLowerCase().replace(/\s+/g,'-');
        addChip(id, val);
        this.value = '';
        e.preventDefault();
      }
    });

    document.getElementById('searchBtn').addEventListener('click', function(){
      const chips = Array.from(chipsContainer.querySelectorAll('.chip')).map(c=>c.querySelector('.chip-label').textContent);
      const level = selectedLevelLabel.textContent;
      alert('Searching\nLevel: ' + level + '\nSelected: ' + (chips.length ? chips.join(', ') : 'Any'));
    });

    searchUnified.addEventListener('click', function(e){
      if(e.target.closest('#levelsToggle')) return;
      openUnifiedDropdown();
    });

    document.addEventListener('keydown', function(e){
      if(e.key === 'Escape'){
        closeUnifiedDropdown();
        levelsPanel.classList.remove('active');
      }
    });
  </script>

  <script>
  async function loadHTML(targetId, filePath) {
    try {
      const res = await fetch(filePath);
      const text = await res.text();
      const target = document.getElementById(targetId);
      if(!target) return;
      target.innerHTML = text;
      const scripts = target.querySelectorAll("script");
      scripts.forEach(oldScript => {
        const newScript = document.createElement("script");
        if (oldScript.src) {
          newScript.src = oldScript.src;
        } else {
          newScript.textContent = oldScript.textContent;
        }
        document.body.appendChild(newScript);
      });
    } catch (err) {
      console.error(`Error loading ${filePath}:`, err);
    }
  }
  </script>

  <script>
  document.querySelectorAll('.row-checkbox').forEach(cb => {
    cb.addEventListener('change', () => {
      window.location.href = 'view-all.html';
    });
  });
</script>
</body>
</html>
